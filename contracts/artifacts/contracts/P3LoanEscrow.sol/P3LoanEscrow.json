{
  "_format": "hh-sol-artifact-1",
  "contractName": "P3LoanEscrow",
  "sourceName": "contracts/P3LoanEscrow.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "registryAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidAmount",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidBorrower",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidLoanState",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SnapshotExpired",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "TierTooLow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "TransferFailed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Unauthorized",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "LoanFunded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "LoanReleased",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "minTier",
          "type": "uint8"
        }
      ],
      "name": "LoanSubmitted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isFull",
          "type": "bool"
        }
      ],
      "name": "RepaymentMade",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        }
      ],
      "name": "fundLoan",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "loans",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "minTier",
          "type": "uint8"
        },
        {
          "internalType": "enum P3LoanEscrow.LoanStatus",
          "name": "status",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "repaidAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nextLoanId",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "registry",
      "outputs": [
        {
          "internalType": "contract IReputationAnchorRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        }
      ],
      "name": "releaseLoan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        }
      ],
      "name": "repayLoan",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "minTier",
          "type": "uint8"
        }
      ],
      "name": "submitLoan",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60a060405234801561001057600080fd5b50604051610b7b380380610b7b83398101604081905261002f9161009e565b6001600160a01b0381166100895760405162461bcd60e51b815260206004820181905260248201527f52656769737472792063616e6e6f74206265207a65726f20616464726573732e604482015260640160405180910390fd5b6001600160a01b0316608052600180556100ce565b6000602082840312156100b057600080fd5b81516001600160a01b03811681146100c757600080fd5b9392505050565b608051610a856100f66000396000818160dc0152818161026e015261032c0152610a856000f3fe6080604052600436106100705760003560e01c8063846b909a1161004e578063846b909a1461011657806387c5145914610129578063ab7b1c891461013f578063e1ec3c681461015257600080fd5b80635507e4cb146100755780636881e862146100975780637b103999146100ca575b600080fd5b34801561008157600080fd5b506100956100903660046108d1565b6101cf565b005b3480156100a357600080fd5b506100b76100b23660046108fc565b610493565b6040519081526020015b60405180910390f35b3480156100d657600080fd5b506100fe7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100c1565b6100956101243660046108d1565b610647565b34801561013557600080fd5b506100b760015481565b61009561014d3660046108d1565b61072f565b34801561015e57600080fd5b506101bc61016d3660046108d1565b60006020819052908152604090208054600182015460028301546003840154600485015460059095015493946001600160a01b03938416949290931692909160ff808316926101009004169087565b6040516100c19796959493929190610960565b60008181526020819052604090206002600482810154610100900460ff16908111156101fd576101fd61094a565b1461021b5760405163046c4b6360e51b815260040160405180910390fd5b60028101546001600160a01b03163314610247576040516282b42960e81b815260040160405180910390fd5b6001810154604051635a2d572960e11b81526001600160a01b0391821660048201526000917f0000000000000000000000000000000000000000000000000000000000000000169063b45aae5290602401602060405180830381865afa1580156102b5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102d991906109c1565b600483015490915060ff908116908216111561030857604051631a68e4b760e21b815260040160405180910390fd5b600182015460405163ba2eb54160e01b81526001600160a01b0391821660048201527f00000000000000000000000000000000000000000000000000000000000000009091169063ba2eb54190602401602060405180830381865afa158015610375573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039991906109e5565b156103b75760405163e1966bdb60e01b815260040160405180910390fd5b60048201805461ff001916610300179055600182015460038301546040516000926001600160a01b031691908381818185875af1925050503d806000811461041b576040519150601f19603f3d011682016040523d82523d6000602084013e610420565b606091505b5050905080610442576040516312171d8360e31b815260040160405180910390fd5b600183015460038401546040519081526001600160a01b039091169085907f895130d6ec3d51c762d94617e61152b1be8447db99e1efe41d743cbde09b39d79060200160405180910390a350505050565b60006001600160a01b0384166104bc57604051636f5f81d760e01b815260040160405180910390fd5b826000036104dd5760405163162908e360e11b815260040160405180910390fd5b600180549060006104ed83610a1d565b9190505590506040518060e00160405280828152602001856001600160a01b03168152602001336001600160a01b031681526020018481526020018360ff168152602001600160048111156105445761054461094a565b81526000602091820181905283815280825260409081902083518155918301516001830180546001600160a01b03199081166001600160a01b03938416179091559184015160028401805490931691161790556060820151600382015560808201516004808301805460ff19811660ff909416938417825560a086015193919261ffff19909116909117906101009084908111156105e4576105e461094a565b021790555060c091909101516005909101556040805184815260ff8416602082015233916001600160a01b0387169184917fcb39d74060488b0a4151b1dc59c30e002ebabd383fe7720492866c43c3bba1a0910160405180910390a49392505050565b60008181526020819052604090206001600482810154610100900460ff16908111156106755761067561094a565b146106935760405163046c4b6360e51b815260040160405180910390fd5b60028101546001600160a01b031633146106bf576040516282b42960e81b815260040160405180910390fd5b806003015434146106e35760405163162908e360e11b815260040160405180910390fd5b60048101805461ff001916610200179055604080513481529051339184917fbd7ef6c6281278f6c8ac4ae9ef2f205b52425813c288dd47c377cb6b59c5076e9181900360200190a35050565b60008181526020819052604090206003600482810154610100900460ff169081111561075d5761075d61094a565b1461077b5760405163046c4b6360e51b815260040160405180910390fd5b60018101546001600160a01b031633146107a7576040516282b42960e81b815260040160405180910390fd5b346000036107c85760405163162908e360e11b815260040160405180910390fd5b348160050160008282546107dc9190610a36565b9091555050600381015460058201546040805134815291909211156020820181905291339185917f8a516dce2d5492f3eb1f9c087c855d62c8fa91acd07f2985b9def5fed36fd329910160405180910390a380156108cc5760048201805461ff00191661040017905560058201805460009182905560028401546040519192916001600160a01b039091169083908381818185875af1925050503d80600081146108a2576040519150601f19603f3d011682016040523d82523d6000602084013e6108a7565b606091505b50509050806108c9576040516312171d8360e31b815260040160405180910390fd5b50505b505050565b6000602082840312156108e357600080fd5b5035919050565b60ff811681146108f957600080fd5b50565b60008060006060848603121561091157600080fd5b83356001600160a01b038116811461092857600080fd5b925060208401359150604084013561093f816108ea565b809150509250925092565b634e487b7160e01b600052602160045260246000fd5b8781526001600160a01b038781166020830152861660408201526060810185905260ff8416608082015260e08101600584106109ac57634e487b7160e01b600052602160045260246000fd5b60a082019390935260c0015295945050505050565b6000602082840312156109d357600080fd5b81516109de816108ea565b9392505050565b6000602082840312156109f757600080fd5b815180151581146109de57600080fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610a2f57610a2f610a07565b5060010190565b80820180821115610a4957610a49610a07565b9291505056fea2646970667358221220f3e0c8341e8a7699a8fa4fdde696abce587a7be526c06d01abd347011e57657264736f6c63430008180033",
  "deployedBytecode": "0x6080604052600436106100705760003560e01c8063846b909a1161004e578063846b909a1461011657806387c5145914610129578063ab7b1c891461013f578063e1ec3c681461015257600080fd5b80635507e4cb146100755780636881e862146100975780637b103999146100ca575b600080fd5b34801561008157600080fd5b506100956100903660046108d1565b6101cf565b005b3480156100a357600080fd5b506100b76100b23660046108fc565b610493565b6040519081526020015b60405180910390f35b3480156100d657600080fd5b506100fe7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100c1565b6100956101243660046108d1565b610647565b34801561013557600080fd5b506100b760015481565b61009561014d3660046108d1565b61072f565b34801561015e57600080fd5b506101bc61016d3660046108d1565b60006020819052908152604090208054600182015460028301546003840154600485015460059095015493946001600160a01b03938416949290931692909160ff808316926101009004169087565b6040516100c19796959493929190610960565b60008181526020819052604090206002600482810154610100900460ff16908111156101fd576101fd61094a565b1461021b5760405163046c4b6360e51b815260040160405180910390fd5b60028101546001600160a01b03163314610247576040516282b42960e81b815260040160405180910390fd5b6001810154604051635a2d572960e11b81526001600160a01b0391821660048201526000917f0000000000000000000000000000000000000000000000000000000000000000169063b45aae5290602401602060405180830381865afa1580156102b5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102d991906109c1565b600483015490915060ff908116908216111561030857604051631a68e4b760e21b815260040160405180910390fd5b600182015460405163ba2eb54160e01b81526001600160a01b0391821660048201527f00000000000000000000000000000000000000000000000000000000000000009091169063ba2eb54190602401602060405180830381865afa158015610375573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039991906109e5565b156103b75760405163e1966bdb60e01b815260040160405180910390fd5b60048201805461ff001916610300179055600182015460038301546040516000926001600160a01b031691908381818185875af1925050503d806000811461041b576040519150601f19603f3d011682016040523d82523d6000602084013e610420565b606091505b5050905080610442576040516312171d8360e31b815260040160405180910390fd5b600183015460038401546040519081526001600160a01b039091169085907f895130d6ec3d51c762d94617e61152b1be8447db99e1efe41d743cbde09b39d79060200160405180910390a350505050565b60006001600160a01b0384166104bc57604051636f5f81d760e01b815260040160405180910390fd5b826000036104dd5760405163162908e360e11b815260040160405180910390fd5b600180549060006104ed83610a1d565b9190505590506040518060e00160405280828152602001856001600160a01b03168152602001336001600160a01b031681526020018481526020018360ff168152602001600160048111156105445761054461094a565b81526000602091820181905283815280825260409081902083518155918301516001830180546001600160a01b03199081166001600160a01b03938416179091559184015160028401805490931691161790556060820151600382015560808201516004808301805460ff19811660ff909416938417825560a086015193919261ffff19909116909117906101009084908111156105e4576105e461094a565b021790555060c091909101516005909101556040805184815260ff8416602082015233916001600160a01b0387169184917fcb39d74060488b0a4151b1dc59c30e002ebabd383fe7720492866c43c3bba1a0910160405180910390a49392505050565b60008181526020819052604090206001600482810154610100900460ff16908111156106755761067561094a565b146106935760405163046c4b6360e51b815260040160405180910390fd5b60028101546001600160a01b031633146106bf576040516282b42960e81b815260040160405180910390fd5b806003015434146106e35760405163162908e360e11b815260040160405180910390fd5b60048101805461ff001916610200179055604080513481529051339184917fbd7ef6c6281278f6c8ac4ae9ef2f205b52425813c288dd47c377cb6b59c5076e9181900360200190a35050565b60008181526020819052604090206003600482810154610100900460ff169081111561075d5761075d61094a565b1461077b5760405163046c4b6360e51b815260040160405180910390fd5b60018101546001600160a01b031633146107a7576040516282b42960e81b815260040160405180910390fd5b346000036107c85760405163162908e360e11b815260040160405180910390fd5b348160050160008282546107dc9190610a36565b9091555050600381015460058201546040805134815291909211156020820181905291339185917f8a516dce2d5492f3eb1f9c087c855d62c8fa91acd07f2985b9def5fed36fd329910160405180910390a380156108cc5760048201805461ff00191661040017905560058201805460009182905560028401546040519192916001600160a01b039091169083908381818185875af1925050503d80600081146108a2576040519150601f19603f3d011682016040523d82523d6000602084013e6108a7565b606091505b50509050806108c9576040516312171d8360e31b815260040160405180910390fd5b50505b505050565b6000602082840312156108e357600080fd5b5035919050565b60ff811681146108f957600080fd5b50565b60008060006060848603121561091157600080fd5b83356001600160a01b038116811461092857600080fd5b925060208401359150604084013561093f816108ea565b809150509250925092565b634e487b7160e01b600052602160045260246000fd5b8781526001600160a01b038781166020830152861660408201526060810185905260ff8416608082015260e08101600584106109ac57634e487b7160e01b600052602160045260246000fd5b60a082019390935260c0015295945050505050565b6000602082840312156109d357600080fd5b81516109de816108ea565b9392505050565b6000602082840312156109f757600080fd5b815180151581146109de57600080fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610a2f57610a2f610a07565b5060010190565b80820180821115610a4957610a49610a07565b9291505056fea2646970667358221220f3e0c8341e8a7699a8fa4fdde696abce587a7be526c06d01abd347011e57657264736f6c63430008180033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
